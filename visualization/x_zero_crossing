/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var geometry = /* color: #d63000 */ee.Geometry.Point([-77.06803237766287, 41.66106699613644]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/

var RESULTS_COLLECTION = ee.ImageCollection('projects/sites-project/baselines_v6-3_by_state_monitoring_assessment')
// var RESULTS_COLLECTION = ee.ImageCollection('projects/sites-project/baselines_v6-3_by_path_monitoring_assessment')

print(RESULTS_COLLECTION)
Map.addLayer(RESULTS_COLLECTION.select('score_weighted_mean'), viz)

var focal_kernel = 60;

var selectedResults = RESULTS_COLLECTION
  .filterMetadata('monitor_year', 'equals', 2017)
  .filterMetadata('time_series', 'equals', 'full')
  .select('score_weighted_mean')
  .median()
  .focal_min(focal_kernel, 'circle', 'meters', 1)

// selectedResults = selectedResults.updateMask(selectedResults.lt(-1))//.unmask()
  
  
var min = -4;
var max = 0;
var palette = ['red', 'orange', 'yellow', 'blue']
var viz = {min: min, max: max, palette: palette};


print(selectedResults)
Map.addLayer(selectedResults, viz)

var zero_thresh = 1

var zero_crossing = selectedResults.add(zero_thresh)
  .zeroCrossing()
  .selfMask()
  
Map.addLayer(zero_crossing, {palette: 'black'})


// var zero_crossing_2 = selectedResults.add(2).zeroCrossing().selfMask()
// Map.addLayer(zero_crossing_2, {palette: 'black'})


// var test = selectedResults.addBands(selectedResults.add(zero_thresh).zeroCrossing())
// Map.addLayer(test)

// var hillshade = ee.Terrain.hillshade(selectedResults.updateMask(selectedResults.lt(0)).multiply(100))
// Map.addLayer(hillshade, {palette: ['white', 'black']})